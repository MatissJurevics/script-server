$taskName = "CheckLeagueAndCloseVanguard"

$action = New-ScheduledTaskAction -Execute "PowerShell.exe" -ArgumentList "-ExecutionPolicy Bypass -File `"$PWD\lol_vanguard_killer.ps1`""

$trigger = New-ScheduledTaskTrigger -AtStartup

$principal = New-ScheduledTaskPrincipal -LogonType ServiceAccount -RunLevel Highest

$settings = New-ScheduledTaskSettingsSet -Hidden -RunOnlyIfIdle -IdleDuration (New-TimeSpan -Minutes 1) -IdleWaitTime (New-TimeSpan -Minutes 2)

Register-ScheduledTask -TaskName $taskName -Action $action -Trigger $trigger -Principal $principal -Settings $settings -Force
```

```powershell
# lol_vanguard_killer.ps1
while ($true) {
    if (Get-Process -Name "LeagueClient" -ErrorAction SilentlyContinue) {
        Get-Process -Name "RiotVanguard" | Stop-Process -Force
    }
    Start-Sleep -Seconds 10
}
